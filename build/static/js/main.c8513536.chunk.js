(this["webpackJsonpmystikdeveloped-todo-app"]=this["webpackJsonpmystikdeveloped-todo-app"]||[]).push([[0],{126:function(e,t,n){},148:function(e,t,n){e.exports=n(277)},277:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(34),c=n.n(o),u=n(39),s=n.n(u),i=function(e){return r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"#000000",viewBox:"0 0 24 24",height:"24",width:"24"},e),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))},l=function(e){return r.a.createElement("svg",Object.assign({fill:"#000000",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"},e),r.a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},d=n(288);function p(e){var t=e.item,n=e.toggleStatus,a=t.checked?i:l;return r.a.createElement(d.a,{fluid:!0,className:"todo-layout",onClick:n},r.a.createElement(d.a.Content,{className:"todo-data"},r.a.createElement(a,null),r.a.createElement("p",{className:"todo-text"},t.task)))}var f=n(287),m=n(284);function h(e){var t=e.items,n=e.hasHadTodos,a=e.actions;return r.a.createElement(s.a,null,r.a.createElement(f.a,null,0===t.length&&r.a.createElement(g,{hasHadTodos:n}),t.map((function(e){return r.a.createElement(p,{key:e._id.toString(),item:e,toggleStatus:function(){return a.toggleTodoStatus(e._id)}})}))))}var g=function(e){return r.a.createElement(m.a,{textAlign:"center",fluid:!0,className:"todo-container"},e.hasHadTodos?r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"celebrate"}," ","\ud83c\udf89"," "),"All done! Enjoy your day!"):r.a.createElement("span",null,"Enter some text and click ",r.a.createElement("strong",null,"Add")," to save your first to-do task"))},v=n(40),b=n(133),E=n(138),O=n(135),y=n(285),j=n(278);function w(){var e=Object(b.a)(["\n\t\tmargin-right: 8px;\n\t\tmargin-left: 8px;\n\t"]);return w=function(){return e},e}function k(e){e.addTodo;var t=Object(E.a)(e,["addTodo"]);return r.a.createElement(m.a,null,r.a.createElement(y.a,Object.assign({style:{width:"75%","margin-bottom":"20px"}},t,{type:"text",placeholder:"What Do You Need To Do?"})),r.a.createElement(x,{action:e.addTodo},"Add To-Do"))}var x=function(e){var t=O.a.div(w());return r.a.createElement(j.a,{className:"mainbtns",color:"info",onClick:e.action,disabled:e.disabled},r.a.createElement(t,null,e.children))};function T(e){var t=e.items,n=e.actions,o=Object(a.useState)(""),c=Object(v.a)(o,2),u=c[0],s=c[1],i=t&&t.filter((function(e){return e.checked})).length>0,l=function(){u&&(n.addTodo(u),s(""))},d=t.every((function(e){return!0===e.checked}));return r.a.createElement(m.a,{fluid:!0,className:"controls"},r.a.createElement(k,{value:u,addTodo:l,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&l()}}),r.a.createElement(m.a,{fluid:!0},t.length>0&&!d&&r.a.createElement(j.a,{className:"selectbtn",floated:"left",onClick:n.completeAllTodos},e.selected?r.a.createElement("span",null,"All Completed"):r.a.createElement("span",null,"Complete All")),i&&r.a.createElement(j.a,{className:"clearbtn",floated:"right",onClick:n.clearCompletedTodos},"Clear Completed")))}var L=n(10),C=n.n(L),A=n(19),I=n(8),N=n(26),S="nodetodo-rxils",H=N.d.hasAppClient(S)?N.d.getAppClient(S):N.d.initializeAppClient(S);function _(){var e=new N.a;return H.auth.loginWithCredential(e)}function U(){return M.apply(this,arguments)}function M(){return(M=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.auth.loginWithRedirect(new N.b);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return H.auth.isLoggedIn?H.auth.user:null}function R(){var e=D();return H.auth.logoutUserWithId(e.id)}var z=r.a.createContext();function W(){var e=r.a.useContext(z);if(!e)throw new Error("useStitchAuth must be used within a StitchAuthProvider");return e}function B(e){var t=r.a.useState({isLoggedIn:H.auth.isLoggedIn,currentUser:D()}),n=Object(v.a)(t,2),o=n[0],c=n[1];Object(a.useEffect)((function(){var e,t={onUserLoggedIn:function(e,t){t&&c((function(e){return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!0,currentUser:t})}))},onUserLoggedOut:function(e,t){c((function(e){return Object(I.a)(Object(I.a)({},e),{},{isLoggedIn:!1,currentUser:null})}))}};return e=t,H.auth.addAuthListener(e),function(){if(H.auth.hasRedirectResult())H.auth.handleRedirectResult()}(),c((function(e){return Object(I.a)({},e)})),function(){!function(e){H.auth.removeAuthListener(e)}(t)}}),[]);var u=function(){var e=Object(A.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isLoggedIn){e.next=6;break}e.t0=t,e.next="anonymous"===e.t0?4:"google"===e.t0?5:6;break;case 4:return e.abrupt("return",_());case 5:return e.abrupt("return",U());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isLoggedIn){e.next=7;break}return e.next=4,R();case 4:c(Object(I.a)(Object(I.a)({},o),{},{isLoggedIn:!1,currentUser:null})),e.next=8;break;case 7:console.log("can't handleLogout when no user is logged in");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=r.a.useMemo((function(){return{isLoggedIn:o.isLoggedIn,currentUser:o.currentUser,actions:{handleLogin:u,handleLogout:s}}}),[o.isLoggedIn]);return r.a.createElement(z.Provider,{value:i},e.children)}var V=n(137),$=H.getServiceClient(N.c.factory,"mongodb-atlas").db("todo").collection("items"),G=function(e,t){var n=t.type,a=t.payload;switch(n){case"setTodos":return Object(I.a)(Object(I.a)({},e),{},{hasHadTodos:a.todos.length>0,todos:a.todos||[]});case"addTodo":var r=Object(I.a)(Object(I.a)({},a),{},{checked:"boolean"===typeof a.checked&&a.checked});return Object(I.a)(Object(I.a)({},e),{},{hasHadTodos:!0,todos:[].concat(Object(V.a)(e.todos),[r])});case"removeTodo":return Object(I.a)(Object(I.a)({},e),{},{todos:e.todos.filter((function(e){return e.id!==a.id}))});case"clearCompletedTodos":return Object(I.a)(Object(I.a)({},e),{},{todos:e.todos.filter((function(e){return!0!==e.checked}))});case"clearTodos":return Object(I.a)(Object(I.a)({},e),{},{todos:[]});case"setTodoStatus":return Object(I.a)(Object(I.a)({},e),{},{todos:e.todos.map((function(e){return e._id===a.id?Object(I.a)(Object(I.a)({},e),{},{status:a.status}):e}))});case"completeAllTodos":return Object(I.a)(Object(I.a)({},e),{},{todos:e.todos.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{checked:!0})}))});case"toggleTodoStatus":return Object(I.a)(Object(I.a)({},e),{},{todos:e.todos.map((function(e){return e._id===a.id?Object(I.a)(Object(I.a)({},e),{},{checked:!e.checked}):e}))});default:console.error("Received invalid todo action type: ".concat(n))}};n(126);function J(){var e=function(e){var t=r.a.useReducer(G,{todos:[]}),n=Object(v.a)(t,2),a=n[0],o=n[1],c=function(){var e=Object(A.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.find({},{limit:1e3}).asArray();case 2:t=e.sent,o({type:"setTodos",payload:{todos:t}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var t=Object(A.a)(C.a.mark((function t(n){var a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={task:n,owner_id:e},t.next=3,$.insertOne(a);case 3:r=t.sent,o({type:"addTodo",payload:Object(I.a)(Object(I.a)({},a),{},{_id:r.insertedId})});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var e=Object(A.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.deleteOne({_id:t});case 2:o({type:"removeTodo",payload:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.deleteMany({});case 2:o({type:"clearTodos"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.deleteMany({checked:!0});case 2:o({type:"clearCompletedTodos"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(A.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.updateOne({_id:t},{$set:{checked:n}},{returnNewDocument:!0});case 2:o({type:"setTodoStatus",payload:{todoId:t,status:n}});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var t=Object(A.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.updateMany({owner_id:e},{$set:{checked:!0}});case 2:o({type:"completeAllTodos"});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=Object(A.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.todos.find((function(e){return e._id===t})),e.next=3,$.updateOne({_id:t},{$set:{checked:!n.currentStatus}});case 3:o({type:"toggleTodoStatus",payload:{id:t}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){c()}),[]),{items:a.todos,hasHadTodos:a.hasHadTodos,actions:{addTodo:u,removeTodo:s,setTodoCompletionStatus:d,clearTodos:i,clearCompletedTodos:l,completeAllTodos:p,toggleTodoStatus:f}}}(W().currentUser.id);return r.a.createElement(s.a,null,r.a.createElement(m.a,{className:"main-layout",style:{"padding-top":"30px"}},r.a.createElement(d.a,{fluid:!0},r.a.createElement(d.a.Header,{as:"h1",style:{margin:"auto","padding-top":"15px"}},"Your To-Do List"),r.a.createElement(T,e)),r.a.createElement(h,e)))}function P(){var e=W().actions;return r.a.createElement(s.a,null,r.a.createElement(m.a,{className:"login-layout"},r.a.createElement(d.a,{fluid:!0,className:"login-card"},r.a.createElement(d.a.Content,null,r.a.createElement(j.a,{fluid:!0,className:"loginbtn",provider:"anonymous",onClick:function(){return e.handleLogin("anonymous")}},"Log In as Guest"),r.a.createElement(j.a,{fluid:!0,className:"loginbtn",provider:"google",onClick:function(){return e.handleLogin("google")}},"Log In with Google")))))}var Y=n(289);function K(){return r.a.createElement(B,null,r.a.createElement(q,null))}function q(){var e=W(),t=e.isLoggedIn,n=e.actions.handleLogout;return r.a.createElement("div",{className:"layout"},r.a.createElement("div",{className:"navbar"},r.a.createElement(Y.a,{as:"h1",className:"title"},"Mystik Developed Node To-Do App"),t&&r.a.createElement(j.a,{inverted:!0,onClick:n},"Logout")),t?r.a.createElement(J,null):r.a.createElement(P,null))}n(276);var F=document.getElementById("root");c.a.render(r.a.createElement(K,null),F)}},[[148,1,2]]]);
//# sourceMappingURL=main.c8513536.chunk.js.map